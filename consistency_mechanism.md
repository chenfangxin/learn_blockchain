# 共识机制

分布式系统的一个核心问题，就是`一致性(Consistency)`问题，也就是系统中的结点，在协议条件保证下，就某个问题达成共识。要实现`一致性`很困难，因为分布式系统中，结点间的通讯可能失败，而且结点有可能会恶意应答(拜占庭错误，即有结点伪造信息)。

在有`拜占庭错误`的系统中，可以使用的共识算法有`PBFT`，`PoW`等；在没有`拜占庭错误`的系统中，可以使用的共识算法有`Paxos`，`Raft`等。

> `FLP不可能原理`：由Fischer, Lynch, Patterson提出的定理，证明了在异步分布式系统中，不存在一个在任意场景下，都能实现的一致性算法。

> `CAP原理`：虽然存在`FLP不可能原理`，但是在工程上，如果作某些妥协，还是能实现异步分布公式系统的共识。即在C(一致性，Consistency)/A(可用性，Availability)/P(分区容错性，Network Partitioning)三个特性，需要弱化某个特性，以保证其他的特性能实现。

> `拜占庭将军问题`：Leslie Lamport在1982年提出的，用来解释异步分布式系统一致性问题的虚拟模型。拜占庭帝国地域广大，守卫边境的将军之间，需要通过信使传递消息，以达成一致行动的决定。关键是将军中可能有叛徒，会故意传递错误的信息，以干扰共识的达成。假设将军总数为N，叛变将军数量为F，Lamport证明了，当`N >= 3F + 1`时，将军之间能达成共识。

----------------------------------------


